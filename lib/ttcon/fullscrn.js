dojo.provide("ttcon.fullscrn");dojo.require("dojo.window");
dojo.declare("ttcon.fullscrn",null,{constructor:function(a){this.VERSION="0.4.9";if(this.isCssCapable=this.tryCss())this.imgNode=dojo.create("div",{id:"fullscrn-bg"},dojo.body(),"first");else{this.imgNode=dojo.create("img",{id:"fullscrn-bg"},dojo.body(),"first");dojo.connect(window,"onresize",this,"resize")}this.setImage(a.image)},onImageLoading:function(){},onImageChanged:function(){},onError:function(){},tryCss:function(){var a=false;if(dojo.isSafari>4||dojo.isFF>=3.6||dojo.isChrome>=4)a=true;return a},
setImage:function(a){this.isCssCapable?this._setImageCss(a):this._setImageNormal(a)},_setImageNormal:function(a){if(dojo.isString(a)){var c=dojo.fadeOut({node:this.imgNode});dojo.connect(c,"onEnd",this,function(){dojo.destroy(this.imgNode);this.imgNode=dojo.create("img",{style:{opacity:0},id:"fullscrn-bg"},dojo.body(),"first");dojo.connect(this.imgNode,"onload",this,function(){this.resize();var b=dojo.fadeIn({node:this.imgNode});dojo.connect(b,"onEnd",this,function(){this.onImageChanged(this.imgNode)});
b.play()});dojo.connect(this.imgNode,"onerror",this,function(b){this.onError(b,"The image '"+a+"' can not be found!")});this.onImageLoading(a);this.imgNode.src=a});c.play()}else return false},_setImageCss:function(a){if(dojo.isString(a)){var c=dojo.fadeOut({node:this.imgNode});dojo.connect(c,"onEnd",this,function(){var b=dojo.create("img",{style:{display:"none"}},dojo.body(),"last");dojo.addClass(this.imgNode,"fullscrn-css-bg");dojo.connect(b,"onload",this,function(){dojo.style(this.imgNode,{backgroundImage:"url('"+
a+"')"});var d=dojo.fadeIn({node:this.imgNode});dojo.connect(d,"onEnd",this,function(){this.onImageChanged(this.imgNode);dojo.destroy(b)});d.play()});dojo.connect(b,"onerror",this,function(d){this.onError(d,"The image '"+a+"' can not be found!")});this.onImageLoading(a);b.src=a});c.play()}else return false},resize:function(){var a=dojo.window.getBox(),c=a.h/a.w,b;b=dojo.position(this.imgNode);if(c>b.h/b.w){c=a.h/b.h*b.w;b=a.h}else{c=a.w;b=a.w/b.w*b.h}dojo.marginBox(this.imgNode,{w:c,h:b,l:0-(c-a.w)/
2,t:0-(b-a.h)/2})}});
