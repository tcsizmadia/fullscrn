dojo.provide("ttcon.fullscrn");dojo.require("dojo.window");
dojo.declare("ttcon.fullscrn",null,{constructor:function(b){this.VERSION="0.4.5";this.imgNode=dojo.create("img",{id:"fullscrn-bg"},dojo.body(),"first");this.fadeOnLoad&&dojo.style(this.imgNode,{opacity:0});this.setImage(b.image);dojo.connect(window,"onresize",this,"resize")},onImageLoading:function(){},onImageChanged:function(){},onError:function(){},setImage:function(b){if(dojo.isString(b)){var c=dojo.fadeOut({node:this.imgNode});dojo.connect(c,"onEnd",this,function(){dojo.destroy(this.imgNode);
this.imgNode=dojo.create("img",{style:{opacity:0},id:"fullscrn-bg"},dojo.body(),"first");dojo.connect(this.imgNode,"onload",this,function(){this.resize();var a=dojo.fadeIn({node:this.imgNode});dojo.connect(a,"onEnd",this,function(){this.onImageChanged(this.imgNode)});a.play()});dojo.connect(this.imgNode,"onerror",this,function(a){this.onError(a,"The image '"+b+"' can not be found!")});this.onImageLoading(b);this.imgNode.src=b});c.play()}else return false},resize:function(){var b=dojo.window.getBox(),
c=b.h/b.w,a;a=dojo.position(this.imgNode);if(c>a.h/a.w){c=b.h/a.h*a.w;a=b.h}else{c=b.w;a=b.w/a.w*a.h}dojo.marginBox(this.imgNode,{w:c,h:a,l:0-(c-b.w)/2,t:0-(a-b.h)/2})}});
